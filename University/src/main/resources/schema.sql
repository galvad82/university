DROP TABLE IF EXISTS LESSONS;
DROP TABLE IF EXISTS GROUPS_STUDENTS;
DROP TABLE IF EXISTS STUDENTS;
DROP TABLE IF EXISTS COURSES;
DROP TABLE IF EXISTS TEACHERS;
DROP TABLE IF EXISTS GROUPS;
DROP TABLE IF EXISTS CLASSROOMS;
CREATE TABLE TEACHERS (id BIGSERIAL PRIMARY KEY, firstname varchar(100), lastname varchar(100));
CREATE TABLE COURSES (id BIGSERIAL PRIMARY KEY, name varchar(100), teacher int REFERENCES TEACHERS(id) ON DELETE CASCADE);
CREATE TABLE STUDENTS (id BIGSERIAL PRIMARY KEY, firstname varchar(100), lastname varchar(100));
CREATE TABLE GROUPS (id BIGSERIAL PRIMARY KEY, name varchar(10));
CREATE TABLE GROUPS_STUDENTS (group_id int NOT NULL REFERENCES groups(id) ON DELETE CASCADE, student_id int NOT NULL REFERENCES students(id) ON DELETE CASCADE, CONSTRAINT groups_students_pkey PRIMARY KEY (group_id, student_id));
CREATE TABLE CLASSROOMS (id BIGSERIAL PRIMARY KEY, name varchar(10));
CREATE TABLE LESSONS (id BIGSERIAL PRIMARY KEY, group_id int REFERENCES GROUPS(id) ON DELETE CASCADE, course int REFERENCES COURSES(id) ON DELETE CASCADE, classroom int REFERENCES CLASSROOMS(id) ON DELETE CASCADE, starttime bigint NOT NULL, duration bigint NOT NULL);